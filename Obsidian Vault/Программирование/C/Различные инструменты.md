Как записывать данные разных форматов? Это вам не питон, здесь нет готовых библиотек с сотнями функций для работы с десятками форматов. Так что необходимо вводить данные в том виде , в котором они предполагаются в массив символов и закидывать полученные данные в файлы. Достаточно искусственно.
Фильтры - построчное считывание и запись данных (head, tail,sed, в  общем линуксовые команды)

scanf() и printf() используют стандартные  входные и выходные потоки данных, но их можно перенаправлять для того, чтобы записывать данные в файлы( < или >)

>$ ./geo2.json < gpsdata.csv > output.json

Маленькое замечание: неправильный код возврата в main - любой код больше 1( проще всего 2)

Запись строк до конца файла выглядит как:
```c
while (fgets(line, MAX_LINE_LENGTH, stdin) != NULL) {}
```
Можно также выбирать поток, в который записывать сообщение:
```c
fprintf(stderr, "Ошибка"); // 2>
fprintf(stdout, "Стандарт");
fscanf(stdin, "Стандарт");
```

Готовую утилиту(например ф-ию, преобразующую cvs-формат в json) можно и нужно использовать для создания похожих по функционалу инструментов: т.е. вывод новой утилиты можно подать на вход уже готовой
( bermuda | geo2json) ; так одновременно запускаются две программы, а сама операция называется каналом,   получаем конвейер
Пример: 
>$(./bermuda | ./geo2json) < spooky.csv > output.json

 Поток данных необходим например для записи данных сразу в несколько файлов, что не позволяется сделать стандартными инструментами ввода-вывода.
 ```c
 FILE* in_file = fopen("input.txt", "r");
 FILE* out_file = fopen("output.file", "w");
 FILE* app_file = fopen("append.file", "a"); // добавление в конец файла
 flose(in_file);
 flose(out_file);
 flose(app_file);
```
Для кастомной настройки при запуске с командной строки в качестве параметров функции используются 
(int argc, char** argv)
Для работы с параметрами командной строки из кода можно использовать getopt() из из библиотеки <unistd.h>
```c
...
while((ch = getopt(argc, argv, "d:t")) != EOF) // где ":" показывает наличие аргумента у параметра

optarg //параметр который присваивается переменной
optind // контроль над количеством параметров
...
```
Заметка: главные аргументы отделяются от параметров с помощью --(устанавливаем температуру на -4):
>...set_temperature -c -- -4 


Ссылки: [[Работа с памятью в C]]
